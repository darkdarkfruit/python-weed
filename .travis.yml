# https://docs.travis-ci.com/user/languages/python/
language: python
python:
#  - "3.6"      # current default Python on Travis CI
  - "3.7"
  - "3.8"
  - "3.9"
#  - "3.9-dev"  # 3.9 development branch
#  - "nightly"  # nightly build


# command to install dependencies
install:
  - |
    rm -rf linux_amd64.tar.gz weed
    wget --quiet https://github.com/chrislusf/seaweedfs/releases/download/2.21/linux_amd64.tar.gz
    tar xf linux_amd64.tar.gz
    chmod +x weed
    mkdir -p data/volume1 data/volume2
    echo "started all weed services"
    echo "pwd is $(pwd)"
    ls -alh
  - whereis pytest
  - "export PYTHONPATH=$PYTHONPATH:$(pwd)"
  - echo $PYTHONPATH
  - python setup.py install # just install it
  - pip install -r requirements.txt

# command to run tests
script:
  - python -m pytest --verbose -r A --collect-in-virtualenv test
